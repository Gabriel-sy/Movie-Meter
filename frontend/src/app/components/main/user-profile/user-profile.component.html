<div class="main-container">
  <div class="main-info">
    <div class="img-user-wrapper">
      <div class="img-box">
        <img *ngIf="user.profilePicture" src="data:image/jpeg;base64,{{ user.profilePicture }}" alt="User Avatar">
        <img *ngIf="!user.profilePicture"
          src="https://img.freepik.com/free-vector/illustration-user-avatar-icon_53876-5907.jpg?t=st=1728179609~exp=1728183209~hmac=bcc2e062443cb92edd6ec60f31d8b25cf6f6a2dd896e177da630c57411aca4ca&w=826"
          alt="User Avatar">
      </div>
      <div class="userName">
        <h2>{{ userName }}</h2>
      </div>
      <div class="user-stats">
        <div class="stat">
          <div class="stat-value" *ngIf="user.reviews">{{ user.reviews.length }}</div>
          <div class="stat-label">Títulos</div>
        </div>
        <div class="stat">
          <div class="stat-value">{{ user.totalLikes }}</div>
          <div class="stat-label">Likes</div>
        </div>
      </div>
      <div class="edit-details-button" *ngIf="shouldShowEditButton">
        <button class="edit-details" [routerLink]="['edit']"><svg xmlns="http://www.w3.org/2000/svg" height="16px"
            viewBox="0 -960 960 960" width="16px" fill="#e8eaed">
            <path
              d="M200-200h57l391-391-57-57-391 391v57Zm-80 80v-170l528-527q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L290-120H120Zm640-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z" />
          </svg>Editar</button>
      </div>
    </div>
    <div class="bio">
      <span>Bio:</span>
      <p>{{ user.biography || 'Sem biografia por enquanto...' }}</p>
    </div>
  </div>
  <div class="favorite-shows">

    <div class="fav-title-container">
      <h2>Títulos favoritos</h2>
    </div>

    <div class="fav-img-wrapper">
      <div (click)="openFavTitleDialog()" class="placeholder" (mouseover)="changeAddSvgOpacity1 = true"
        (mouseleave)="changeAddSvgOpacity1 = false">

        <svg *ngIf="shouldShowEditButton && favShows[0]" (click)="deleteFavShow(favShows[0].originalTitle, $event)"
          class="remove-svg" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
          fill="#EA3323">
          <path
            d="m336-280 144-144 144 144 56-56-144-144 144-144-56-56-144 144-144-144-56 56 144 144-144 144 56 56ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z" />
        </svg>
        <svg *ngIf="shouldShowEditButton" class="add-svg" [ngStyle]="{'opacity': changeAddSvgOpacity1 ? 1 : 0.5}"
          xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24" fill="#e8eaed">
          <path d="M440-440H200v-80h240v-240h80v240h240v80H520v240h-80v-240Z" />
        </svg>
        <img *ngIf="favShows[0]" (click)="stopPropagation($event)" [src]="showImage(favShows[0].posterPath)">
      </div>
      <div (click)="openFavTitleDialog()" class="placeholder" (mouseover)="changeAddSvgOpacity2 = true"
        (mouseleave)="changeAddSvgOpacity2 = false">
        
        <svg *ngIf="shouldShowEditButton && favShows[1]" (click)="deleteFavShow(favShows[1].originalTitle, $event)"
          class="remove-svg" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
          fill="#EA3323">
          <path
            d="m336-280 144-144 144 144 56-56-144-144 144-144-56-56-144 144-144-144-56 56 144 144-144 144 56 56ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z" />
        </svg>
        <svg *ngIf="shouldShowEditButton" class="add-svg" [ngStyle]="{'opacity': changeAddSvgOpacity2 ? 1 : 0.5}"
          xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24" fill="#e8eaed">
          <path d="M440-440H200v-80h240v-240h80v240h240v80H520v240h-80v-240Z" />
        </svg>
        <img *ngIf="favShows[1]" (click)="stopPropagation($event)" [src]="showImage(favShows[1].posterPath)">
      </div>
      <div (click)="openFavTitleDialog()" class="placeholder" (mouseover)="changeAddSvgOpacity3 = true"
        (mouseleave)="changeAddSvgOpacity3 = false">
        <svg *ngIf="shouldShowEditButton && favShows[2]" (click)="deleteFavShow(favShows[2].originalTitle, $event)"
          class="remove-svg" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
          fill="#EA3323">
          <path
            d="m336-280 144-144 144 144 56-56-144-144 144-144-56-56-144 144-144-144-56 56 144 144-144 144 56 56ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z" />
        </svg>
        <svg *ngIf="shouldShowEditButton" class="add-svg" [ngStyle]="{'opacity': changeAddSvgOpacity3 ? 1 : 0.5}"
          xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24" fill="#e8eaed">
          <path d="M440-440H200v-80h240v-240h80v240h240v80H520v240h-80v-240Z" />
        </svg>
        <img *ngIf="favShows[2]" (click)="stopPropagation($event)" [src]="showImage(favShows[2].posterPath)">
      </div>
      <div (click)="openFavTitleDialog()" class="placeholder" (mouseover)="changeAddSvgOpacity4 = true"
        (mouseleave)="changeAddSvgOpacity4 = false">
        <svg *ngIf="shouldShowEditButton && favShows[3]" (click)="deleteFavShow(favShows[3].originalTitle, $event)"
          class="remove-svg" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
          fill="#EA3323">
          <path
            d="m336-280 144-144 144 144 56-56-144-144 144-144-56-56-144 144-144-144-56 56 144 144-144 144 56 56ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z" />
        </svg>
        <svg *ngIf="shouldShowEditButton" class="add-svg" [ngStyle]="{'opacity': changeAddSvgOpacity4 ? 1 : 0.5}"
          xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24" fill="#e8eaed">
          <path d="M440-440H200v-80h240v-240h80v240h240v80H520v240h-80v-240Z" />
        </svg>
        <img *ngIf="favShows[3]" (click)="stopPropagation($event)" [src]="showImage(favShows[3].posterPath)">
      </div>
    </div>

  </div>


  <div class="section">
    <h2>Atividade Recente</h2>
    <ul class="recent-activity">
      <li class="activity-item" *ngFor="let review of recentReviews | async">
        <div class="activity-content">Avaliou: "{{ review.originalTitle }}"</div>
        <div class="activity-date">{{ review.timeSinceCreation }}</div>
      </li>
    </ul>
  </div>
</div>